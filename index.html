<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>SwitchPilot - Free Auto-Switching Energy Service (Coming Soon)</title>
<style>
body {margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#0c0e1f;color:#fff;overflow-x:hidden;background-image:linear-gradient(rgba(99,102,241,0.12) 1px, transparent 1px), linear-gradient(90deg, rgba(236,72,153,0.12) 1px, transparent 1px);background-size:70px 70px;}

/* HERO */
.hero {position:relative;padding:8.5rem 2rem 6rem;overflow:hidden;background:#0c0e1f;}
.energy-grid {position:absolute;inset:0;background-image:linear-gradient(rgba(99,102,241,0.12) 1px,transparent 1px),linear-gradient(90deg,rgba(236,72,153,0.12) 1px,transparent 1px);background-size:70px 70px;opacity:.10;animation:energyGridMove 18s linear infinite;}
@keyframes energyGridMove {0%{transform:translateY(0)}100%{transform:translateY(60px)}}
.floating-symbols {position:absolute;inset:0;pointer-events:none;}
.symbol {position:absolute;font-size:3rem;opacity:.85;animation:drift 10s ease-in-out infinite;pointer-events:none;filter:drop-shadow(0 0 20px rgba(99,102,241,0.6));}
@keyframes drift {0%,100%{transform:translate(0,0) rotate(0)}50%{transform:translate(20px,-30px) rotate(10deg)}}

/* Glowing pulse animation for energy symbols */
.symbol:nth-child(1), .symbol:nth-child(4) {
animation: drift 10s ease-in-out infinite, energyGlow 2s ease-in-out infinite;
}
@keyframes energyGlow {
0%, 100% { opacity: 0.6; filter: drop-shadow(0 0 20px rgba(99,102,241,0.6)); }
50% { opacity: 1; filter: drop-shadow(0 0 40px rgba(236,72,153,0.9)); }
}

.symbol:nth-child(1){left:55%;top:14%}
.symbol:nth-child(2){left:70%;top:10%}
.symbol:nth-child(3){left:50%;top:65%}
.symbol:nth-child(4){left:85%;top:28%}
.symbol:nth-child(5){left:50%;top:35%}

.hero-content {max-width:1200px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:4rem;align-items:center;position:relative;z-index:5;}
.badge {display:inline-block;background:rgba(255,255,255,0.15);padding:.7rem 1.4rem;border-radius:50px;margin-bottom:1.5rem;font-weight:700;font-size:.9rem;backdrop-filter:blur(10px);}
.hero-text h1 {font-size:4rem;font-weight:900;margin:0 0 1.5rem;text-shadow:0 5px 30px rgba(99,102,241,0.5);}
.hero-text p {font-size:1.25rem;opacity:.85;line-height:1.6;max-width:90%;}
.pilot-container {position:relative;display:flex;justify-content:center;align-items:center;}
.pilot-character {font-size:18rem;animation:pilotFloat 4s infinite ease-in-out;filter:drop-shadow(0 30px 60px rgba(99,102,241,0.55));transform:translateX(-15px);}
@keyframes pilotFloat {0%,100%{transform:translateX(-15px) translateY(0) rotate(-6deg)}50%{transform:translateX(-15px) translateY(-35px) rotate(6deg)}}
.destination-tag {position:absolute;bottom:2rem;right:1rem;background:rgba(255,255,255,0.95);color:#1a1a2e;padding:1.2rem 2rem;border-radius:20px;font-weight:700;box-shadow:0 20px 60px rgba(0,0,0,0.4);}
.destination-tag strong {font-size:1.8rem;color:#6366f1;display:block;margin-top:.3rem;}

/* WAITLIST */
.waitlist-form {max-width:700px;margin:3.5rem auto 4rem;background:#ffffff;color:#1a1a2e;padding:3rem;border-radius:30px;box-shadow:0 25px 80px rgba(0,0,0,0.2);}
.waitlist-form h3 {font-size:2rem;font-weight:900;margin-bottom:1rem;color:#1a1a2e;}
.waitlist-form p {opacity:.8;margin-bottom:1.5rem;font-size:1.05rem;color:#1a1a2e;}
.form-group input {width:100%;padding:1.2rem;border-radius:15px;border:2px solid #eee;background:#fafafa;font-size:1rem;color:#1a1a2e;box-sizing:border-box;}
.submit-btn {width:100%;padding:1.2rem;border:none;border-radius:15px;font-size:1.2rem;font-weight:700;background:linear-gradient(90deg,#6366f1,#ec4899);color:#fff;cursor:pointer;box-shadow:0 10px 30px rgba(236,72,153,0.3);margin-top:1rem;}

/* Signup counter animation */
.signup-counter {
animation: counterFadeIn 0.6s ease-out;
}
@keyframes counterFadeIn {
0% { opacity: 0; transform: translateY(-10px); }
100% { opacity: 1; transform: translateY(0); }
}
#signupCount {
display: inline-block;
min-width: 2ch;
}

/* INSIGHTS */
.insights {background:#0f1329;padding:4.5rem 2rem;text-align:center;position:relative;overflow:hidden;}

/* Animated circuit lines */
.insights::before {
content: '';
position: absolute;
top: 0;
left: 0;
right: 0;
height: 2px;
background: linear-gradient(90deg, transparent, #6366f1, transparent);
animation: scanline 3s linear infinite;
}
.insights::after {
content: '';
position: absolute;
bottom: 0;
left: 0;
right: 0;
height: 2px;
background: linear-gradient(90deg, transparent, #ec4899, transparent);
animation: scanline 3s linear infinite reverse;
}
@keyframes scanline {
0% { transform: translateX(-100%); }
100% { transform: translateX(100%); }
}

.insights h2 {font-size:3rem;font-weight:900;margin-bottom:0.5rem;position:relative;z-index:2;}
.topics {max-width:1200px;margin:2.5rem auto 0;display:grid;grid-template-columns:repeat(auto-fit,minmax(340px,1fr));gap:2rem;padding:0 2rem;}
.topic {background:#11162e;padding:2.5rem;border-radius:22px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 10px 40px rgba(0,0,0,0.45);display:flex;flex-direction:column;justify-content:flex-start;cursor:pointer;transition:.3s;position:relative;overflow:hidden;text-align:left;}

/* Glowing edge on hover */
.topic::before {
content: '';
position: absolute;
inset: 0;
border-radius: 22px;
padding: 2px;
background: linear-gradient(135deg, #6366f1, #ec4899);
-webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
-webkit-mask-composite: xor;
mask-composite: exclude;
opacity: 0;
transition: opacity 0.3s;
}
.topic:hover::before {
opacity: 1;
}

.topic:hover {transform:translateY(-6px);box-shadow:0 15px 50px rgba(99,102,241,0.4);}
.topic h3 {font-size:1.5rem;margin-bottom:1rem;margin-top:0;line-height:1.3;font-weight:800;}
.topic p {opacity:.85;line-height:1.6;font-size:1.05rem;margin:0 0 1.2rem 0;}
.topic p:last-child {margin-bottom:0;font-size:0.9rem;opacity:0.6;margin-top:auto;padding-top:1rem;}

/* STATS */
.stats {max-width:1200px;margin:6rem auto;display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:3rem;text-align:center;padding:0 2rem;position:relative;}
.stat-number {font-size:3rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}

/* CTA */
.final-cta {text-align:center;padding:6rem 2rem;background:#11152d;position:relative;overflow:hidden;}

/* Animated grid overlay */
.final-cta::before {
content: '';
position: absolute;
inset: 0;
background-image:
linear-gradient(rgba(99,102,241,0.08) 1px, transparent 1px),
linear-gradient(90deg, rgba(236,72,153,0.08) 1px, transparent 1px);
background-size: 50px 50px;
animation: gridSlide 15s linear infinite;
}
@keyframes gridSlide {
0% { transform: translate(0, 0); }
100% { transform: translate(50px, 50px); }
}

.final-cta h2 {font-size:3rem;font-weight:900;margin-bottom:1.5rem;position:relative;z-index:2;}
.final-cta p {max-width:800px;margin:0 auto 2rem;opacity:.85;font-size:1.1rem;line-height:1.6;position:relative;z-index:2;}
.cta-btn {padding:1.3rem 3rem;border:none;border-radius:20px;font-size:1.3rem;font-weight:700;background:linear-gradient(135deg,#6366f1,#ec4899);color:#fff;cursor:pointer;box-shadow:0 10px 40px rgba(236,72,153,0.4);transition:.3s;position:relative;z-index:2;}
.cta-btn:hover {transform:translateY(-3px);box-shadow:0 15px 50px rgba(236,72,153,0.5);}

/* MOBILE RESPONSIVE */

@media (max-width: 968px) {
.hero {padding:6rem 1.5rem 4rem;}
.hero-content {grid-template-columns:1fr;gap:2rem;}
.hero-text h1 {font-size:2.5rem;}
.hero-text p {font-size:1.1rem;max-width:100%;}
.pilot-character {font-size:10rem;}
.destination-tag {position:static;margin:2rem auto 0;max-width:280px;text-align:center;}

.floating-symbols {display:none;}

.vision-mission-grid {
    grid-template-columns: 1fr !important;
    gap: 1.5rem !important;
    padding: 0 1.5rem !important;
    margin-top: 3rem !important;
    margin-bottom: 3rem !important;
}

section[style*="max-width:900px"][style*="margin:3.5rem"] {
    margin: 2.5rem auto 0 !important;
    padding: 0 1.5rem !important;
}

.waitlist-form {padding:2rem 1.5rem;margin:2rem 1.5rem;}
.waitlist-form h3 {font-size:1.6rem;}
.signup-counter {padding:1rem !important;}
.signup-counter > div {flex-wrap:wrap;justify-content:center;text-align:center;}

.insights {padding:3.5rem 1.5rem !important;}
.insights h2, .final-cta h2 {font-size:2rem;}
.topics {grid-template-columns:1fr;gap:1.5rem;}

.stats {grid-template-columns:1fr;gap:2rem;}
.stat-number {font-size:2.5rem;}

#gameCanvas {max-width:100%;height:auto;}

/* Price cap section mobile */
section[style*="max-width:1400px"] {
    padding: 3rem 1.5rem !important;
}
section[style*="max-width:1400px"] > div {
    padding: 2rem 1.5rem !important;
}
section[style*="max-width:1400px"] h2 {
    font-size: 2rem !important;
}
section[style*="max-width:1400px"] div[style*="height:600px"] {
    height: 400px !important;
}
section[style*="max-width:1400px"] div[style*="min-width:200px"] {
    min-width: 140px !important;
    padding: 15px !important;
}
section[style*="max-width:1400px"] div[style*="gap:40px"] {
    gap: 20px !important;
}

.final-cta {padding:4rem 1.5rem;}
.final-cta p {font-size:1rem;}
.cta-btn {padding:1rem 2rem;font-size:1.1rem;width:100%;max-width:300px;}
}

@media (max-width: 480px) {
.hero { padding:4.5rem 1rem 3rem !important; }
.top-logo-wrapper { top:12px !important; }
.pilot-container { margin-top:1rem !important; }
.destination-tag { margin-top:1rem !important; margin-left:auto !important; margin-right:auto !important; text-align:center !important; }
.hero-text h1 { font-size:2rem !important; }
.pilot-character { font-size:8rem !important; }

.vision-mission-grid {
    padding: 0 1rem !important;
    gap: 1rem !important;
}

section[style*="max-width:900px"][style*="margin:3.5rem"] {
    margin: 2rem auto 0 !important;
    padding: 0 1rem !important;
}

section[style*="max-width:900px"] > div {
    padding: 1.5rem 1rem !important;
}

.waitlist-form {
    padding: 1.5rem 1rem !important;
    margin: 1.5rem 1rem !important;
}

/* Price cap section on small phones */
section[style*="max-width:1400px"] {
    padding: 2rem 1rem !important;
}
section[style*="max-width:1400px"] > div {
    padding: 1.5rem 1rem !important;
}
section[style*="max-width:1400px"] h2 {
    font-size: 1.6rem !important;
}
section[style*="max-width:1400px"] p[style*="font-size:1.1rem"] {
    font-size: 0.95rem !important;
}
section[style*="max-width:1400px"] div[style*="height:600px"] {
    height: 300px !important;
}
section[style*="max-width:1400px"] div[style*="min-width:200px"] {
    min-width: 0 !important;
    width: 100% !important;
    max-width: 250px !important;
    padding: 12px !important;
}
section[style*="max-width:1400px"] div[style*="min-width:200px"] p:first-child {
    font-size: 10px !important;
}
section[style*="max-width:1400px"] div[style*="min-width:200px"] p:nth-child(2) {
    font-size: 24px !important;
}
section[style*="max-width:1400px"] div[style*="min-width:200px"] p:last-child {
    font-size: 12px !important;
}

.final-cta { padding: 3rem 1rem !important; }
}
.topic p { font-size:1rem !important; line-height:1.45 !important; }
.price-cap-btn { width:32% !important; font-size:11px !important; padding:7px 0 !important; }
.footer { padding:2.5rem 1rem !important; }
body { font-size:15px !important; }
.hero-text h1 {font-size:2rem;}
.pilot-character {font-size:10rem;}
.waitlist-form h3 {font-size:1.4rem;}
.insights, .final-cta {padding:3rem 1rem;}

/* Responsive logo */
.top-logo-wrapper {left:15px !important;gap:6px !important;}
.logo-icon {font-size:1.8rem !important;}
.logo-text {font-size:1.5rem !important;}

}

/* Price Cap Tool Styles */
.price-cap-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 600;
  transition: all 0.3s;
  margin: 5px;
  background: #2c3e50;
  color: white;
}

.price-cap-active {
  background: linear-gradient(135deg, #6366f1, #ec4899);
  color: white;
  font-weight: bold;
}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

</head>
<body>

<!-- TOP LEFT LOGO -->

<div class="top-logo-wrapper" style="position:absolute; top:25px; left:30px; z-index:9999; display:flex; align-items:center; gap:10px;">
    <span class="logo-icon" style="font-size:2.3rem; filter:drop-shadow(0 5px 10px rgba(0,0,0,0.4));">âœˆï¸âš¡</span>
    <span class="logo-text" style="font-size:1.9rem; font-weight:900; letter-spacing:-0.5px;">SwitchPilot</span>
</div>

<section class="hero">
<div class="energy-grid"></div>
<div class="floating-symbols">
<div class="symbol">âš¡</div><div class="symbol">ğŸ’·</div><div class="symbol">ğŸ”Œ</div><div class="symbol">ğŸ’¡</div><div class="symbol">ğŸ“ˆ</div>
</div>
<div class="hero-content">
<div class="hero-text">
<div class="badge">ğŸš€ Building Together</div>
<h1>Your Flight to Better Energy Deals</h1>
<p style="font-size:1.25rem;opacity:.85;line-height:1.6;max-width:90%;">We're building a service that automatically switches you to the best energy deal on the market â€” for free. Plus a community that educates you on what you're actually paying for.</p>
</div>
<div class="pilot-container">
<div class="pilot-character">âœˆï¸</div>
<div class="destination-tag"><span>Next Destination:</span><strong>Smarter Switching</strong></div>
</div>
</div>

<!-- Vision & Mission Boxes -->

<div class="vision-mission-grid" style="max-width:1100px;margin:0 auto;display:grid;grid-template-columns:1fr 1fr;gap:2rem;padding:0 2rem;position:relative;z-index:5;">
  <div style="background:rgba(17,22,46,0.95);padding:2rem;border-radius:22px;border:2px solid rgba(99,102,241,0.3);box-shadow:0 15px 50px rgba(0,0,0,0.4);">
    <div style="display:flex;align-items:center;gap:0.6rem;margin-bottom:1rem;">
      <span style="font-size:1.8rem;">ğŸ”®</span>
      <h3 style="margin:0;font-size:1.3rem;font-weight:800;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Our Vision</h3>
    </div>
    <p style="margin:0;font-size:1.4rem;font-weight:700;line-height:1.4;margin-bottom:1rem;">Putting the power back in your hands</p>
    <p style="margin:0;font-size:1.05rem;line-height:1.6;opacity:0.85;">An energy market where customers are informed, empowered, and never overpay. Where transparency is the norm and switching is effortless.</p>
  </div>
  <div style="background:rgba(17,22,46,0.95);padding:2rem;border-radius:22px;border:2px solid rgba(236,72,153,0.3);box-shadow:0 15px 50px rgba(0,0,0,0.4);">
    <div style="display:flex;align-items:center;gap:0.6rem;margin-bottom:1rem;">
      <span style="font-size:1.8rem;">ğŸš€</span>
      <h3 style="margin:0;font-size:1.3rem;font-weight:800;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">What We're Building</h3>
    </div>
    <p style="margin:0;font-size:1.05rem;line-height:1.6;opacity:0.9;">A <strong>free auto-switching service</strong> that automatically puts you on the best tariff on the market based on your preferences (with your consent of course!) â€” no commission, no catch. Plus a community that educates you on where your money actually goes. We're not another comparison site. We're building this WITH you to challenge the status quo.</p>
  </div>
</div>
</section>

<!-- WHO WE ARE -->

<section style="max-width:900px;margin:3.5rem auto 0;padding:0 2rem;">
<div style="background:rgba(17,22,46,0.95);padding:3rem;border-radius:22px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 20px 60px rgba(0,0,0,0.4);">
  <h2 style="font-size:2.2rem;font-weight:900;margin-bottom:1.5rem;text-align:center;">Who We Are</h2>

  <p style="font-size:1.1rem;line-height:1.7;margin-bottom:1.2rem;opacity:0.9;">
    We're just two people who've been working in the UK energy industry recently. Before this? <strong>Zero knowledge about energy bills.</strong>
  </p>

  <p style="font-size:1.1rem;line-height:1.7;margin-bottom:1.2rem;opacity:0.9;">
    Now? We've learned things that shocked us. And we can't unsee them.
  </p>

  <div style="background:rgba(99,102,241,0.1);padding:1.5rem;border-radius:15px;border-left:4px solid #6366f1;margin:1.5rem 0;">
    <p style="font-size:1rem;line-height:1.6;margin:0;opacity:0.95;">
      Did you know you're paying wind farms to turn off when it's too windy (<strong>constraint payments</strong>), whilst funding them through <strong>CfDs</strong>? Or funding nuclear plant investors <strong>before it's even built</strong> (Nuclear RAB)? Through the Warm Home Discount, you're subsidising other people's discounts even if you don't qualify.
    </p>
  </div>

  <p style="font-size:1.1rem;line-height:1.7;margin-top:1.2rem;margin-bottom:0;opacity:0.9;">
    None of this is explained on your bill. But you're paying for all of it. That's why we're building SwitchPilot <strong>WITH you</strong>â€”educating you while creating a service that actually works for you. Because an informed customer creates a more competitive market for everyone.
  </p>
</div>
</section>

<!-- SURVEY STATS SHOWCASE -->
<section style="max-width:1200px;margin:4rem auto;padding:0 2rem;">
<div style="background:rgba(17,22,46,0.95);padding:3rem;border-radius:22px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 20px 60px rgba(0,0,0,0.4);text-align:center;">
  <div style="font-size:2rem;margin-bottom:0.8rem;">ğŸ“Š</div>
  <h2 style="font-size:2.2rem;font-weight:900;margin-bottom:1rem;">We Asked 200 People About Energy Switching</h2>
  <p style="font-size:1.1rem;line-height:1.6;opacity:0.85;margin-bottom:2.5rem;max-width:700px;margin-left:auto;margin-right:auto;">
    Before building anything, we surveyed real people. Here's what we found:
  </p>
  
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:2rem;margin-bottom:2rem;">
    <div style="background:rgba(99,102,241,0.1);padding:2rem;border-radius:18px;border:2px solid rgba(99,102,241,0.3);">
      <div style="font-size:3.5rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;">77.5%</div>
      <p style="font-size:1.05rem;font-weight:600;margin:0;opacity:0.95;">Want auto-switching</p>
      <p style="font-size:0.9rem;margin:0.5rem 0 0 0;opacity:0.7;">3 in 4 people are ready for this</p>
    </div>
    
    <div style="background:rgba(236,72,153,0.1);padding:2rem;border-radius:18px;border:2px solid rgba(236,72,153,0.3);">
      <div style="font-size:3.5rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;">73%</div>
      <p style="font-size:1.05rem;font-weight:600;margin:0;opacity:0.95;">Of "content" customers</p>
      <p style="font-size:0.9rem;margin:0.5rem 0 0 0;opacity:0.7;">Still want switching when friction is removed</p>
    </div>
    
    <div style="background:rgba(99,102,241,0.1);padding:2rem;border-radius:18px;border:2px solid rgba(99,102,241,0.3);">
      <div style="font-size:3.5rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;">61%</div>
      <p style="font-size:1.05rem;font-weight:600;margin:0;opacity:0.95;">Don't understand bills</p>
      <p style="font-size:0.9rem;margin:0.5rem 0 0 0;opacity:0.7;">Education builds trust & empowerment</p>
    </div>
    
    <div style="background:rgba(236,72,153,0.1);padding:2rem;border-radius:18px;border:2px solid rgba(236,72,153,0.3);">
      <div style="font-size:3.5rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin-bottom:0.5rem;">48%</div>
      <p style="font-size:1.05rem;font-weight:600;margin:0;opacity:0.95;">Haven't switched in 5+ years</p>
      <p style="font-size:0.9rem;margin:0.5rem 0 0 0;opacity:0.7;">The exact inertia suppliers profit from</p>
    </div>
  </div>
  
  <a href="survey-results.html" style="display:inline-block;padding:1rem 2rem;background:linear-gradient(135deg,#6366f1,#ec4899);color:#fff;text-decoration:none;border-radius:15px;font-weight:700;font-size:1rem;box-shadow:0 10px 30px rgba(236,72,153,0.3);transition:transform 0.2s;">
    Read Full Survey Results â†’
  </a>
  
  <p style="font-size:1rem;opacity:0.8;margin-top:2rem;max-width:650px;margin-left:auto;margin-right:auto;line-height:1.6;">
    <strong>But surveys are just surveys.</strong> We want to build a community and listen to <strong>YOU</strong>â€”creating a product <strong>WITH</strong> you that actually works for you.
  </p>
</div>
</section>

<div class="waitlist-form">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(236,72,153,0.15));padding:1.5rem 2rem;border-radius:18px;border:2px solid rgba(99,102,241,0.3);margin-bottom:1.5rem;text-align:center;">
  <div style="font-size:1.3rem;font-weight:800;color:#1a1a2e;margin-bottom:0.5rem;">ğŸ¯ Join 5,000 Early Access Pilots</div>
  <p style="margin:0;font-size:1rem;color:#1a1a2e;opacity:0.85;">Be part of the crew that shapes what we buildâ€”and get first access when we launch</p>
</div>
<div class="signup-counter" style="display:flex;flex-direction:column;align-items:center;gap:0.8rem;margin-bottom:1.5rem;padding:1.2rem 1.5rem;background:linear-gradient(135deg,rgba(99,102,241,0.1),rgba(236,72,153,0.1));border-radius:15px;border:2px solid rgba(99,102,241,0.2);">
  <div style="display:flex;align-items:center;gap:0.5rem;">
    <span style="font-size:1.5rem;">ğŸ‘¥</span>
    <span style="font-size:1rem;color:#1a1a2e;opacity:0.8;">Already on board:</span>
    <div style="display:inline-flex;align-items:center;gap:0.3rem;">
      <span id="signupCount" style="font-size:1.8rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">0</span>
      <span style="font-size:1rem;color:#1a1a2e;opacity:0.8;">pilots</span>
    </div>
  </div>
  <div style="width:100%;background:rgba(99,102,241,0.15);border-radius:10px;height:12px;overflow:hidden;">
    <div id="progressBar" style="width:0%;height:100%;background:linear-gradient(90deg,#6366f1,#ec4899);border-radius:10px;transition:width 0.5s ease;"></div>
  </div>
  <div style="display:flex;align-items:center;gap:0.5rem;">
    <span style="font-size:1rem;color:#1a1a2e;opacity:0.8;">ğŸ¯ Only</span>
    <div style="display:inline-flex;align-items:center;gap:0.3rem;">
      <span id="spotsRemaining" style="font-size:1.4rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">5,000</span>
      <span style="font-size:1rem;color:#1a1a2e;opacity:0.8;">spots left for early access</span>
    </div>
  </div>
</div>
<h3>Join the Flight Crew âœˆï¸</h3>
<p>Get weekly energy insights + early access to free auto-switching when we launch</p>
<form onsubmit="handleSubmit(event)">
<div class="form-group"><input type="email" placeholder="Your email address" required /></div>
<button type="submit" class="submit-btn">Get Early Access</button>
</form>
<p style="margin-top:1rem;font-size:.9rem;opacity:.6;">ğŸ”’ Unsubscribe anytime. We respect your inbox.</p>
</div>

<!-- EMBEDDED PRICE CAP TOOL -->
<section id="bill-breakdown" style="max-width:1400px;margin:3.5rem auto 0;padding:0 2rem;">
<div style="background:rgba(17,22,46,0.95);padding:3rem;border-radius:22px;border:1px solid rgba(255,255,255,0.08);box-shadow:0 20px 60px rgba(0,0,0,0.4);">
  <div style="text-align:center;margin-bottom:2rem;">
    <div style="font-size:2.5rem;margin-bottom:1rem;">ğŸ“Š</div>
    <h2 style="font-size:2.5rem;font-weight:900;margin-bottom:1rem;">Energy Price Cap Breakdown</h2>
    <p style="font-size:1.1rem;opacity:0.85;max-width:800px;margin:0 auto;">
      Ever wondered where your energy bill money actually goes? We've broken down the UK price cap into every single cost component.
    </p>
  </div>

  <div style="margin-bottom:30px;text-align:center;">
    <p style="font-size:14px;color:#bdc3c7;margin-bottom:10px;font-weight:500;">Payment Method:</p>
    <button class="price-cap-btn price-cap-active" onclick="setPriceCapMethod('directDebit')">Direct Debit</button>
    <button class="price-cap-btn" onclick="setPriceCapMethod('standardCredit')">Standard Credit</button>
    <button class="price-cap-btn" onclick="setPriceCapMethod('prepayment')">Prepayment</button>
  </div>
  
  <div style="height:600px;margin-bottom:30px;">
    <canvas id="priceCapChart"></canvas>
  </div>
  
  <div style="display:flex;justify-content:center;gap:40px;flex-wrap:wrap;margin-top:30px;">
    <div style="text-align:center;padding:20px;border-radius:8px;min-width:200px;background:rgba(44,62,80,0.5);">
      <p style="font-size:12px;color:#bdc3c7;margin-bottom:5px;">Oct-Dec 2025</p>
      <p id="priceCapPeriod1Total" style="font-size:32px;font-weight:bold;color:#ecf0f1;margin:0;">Â£1755</p>
    </div>
    <div style="text-align:center;padding:20px;border-radius:8px;min-width:200px;background:linear-gradient(135deg,#6366f1,#ec4899);">
      <p style="font-size:12px;color:#ecf0f1;margin-bottom:5px;">Jan-Mar 2026</p>
      <p id="priceCapPeriod2Total" style="font-size:32px;font-weight:bold;color:white;margin:0;">Â£1758</p>
      <p id="priceCapChangeAmount" style="font-size:14px;color:#ecf0f1;margin-top:5px;">+Â£3 (+0.2%)</p>
    </div>
  </div>
  
  <div style="margin-top:30px;padding:15px;background:rgba(44,62,80,0.3);border-left:4px solid #6366f1;font-size:12px;color:#bdc3c7;border-radius:5px;">
    <p style="margin:0 0 5px 0;"><strong>Source:</strong> OFGEM (Office of Gas and Electricity Markets)</p>
    <p style="margin:0 0 5px 0;"><strong>Typical Consumption:</strong> 2,700kWh electricity, 11,500kWh gas annually (UK average, rates vary by region)</p>
    <p style="margin:5px 0 0 0;"><strong>Note:</strong> Hover over chart bars to see individual cost components and their values.</p>
  </div>
</div>
</section>


<!-- TARIFF TRACKER CALLOUT -->
<section style="max-width:1200px;margin:3.5rem auto 4.5rem;padding:0 2rem;">
<div style="background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(236,72,153,0.15));padding:3rem;border-radius:22px;border:1px solid rgba(168,85,247,0.3);box-shadow:0 20px 60px rgba(99,102,241,0.2);text-align:center;">
  <div style="display:inline-block;background:rgba(251,191,36,0.2);color:#fde68a;padding:0.5rem 1rem;border-radius:20px;font-size:0.85rem;font-weight:600;margin-bottom:1rem;">â³ While We Build Auto-Switching</div>
  <div style="font-size:3rem;margin-bottom:1rem;">âš¡</div>
  <h2 style="font-size:2.5rem;font-weight:900;margin-bottom:1rem;">Live Tariff Tracker</h2>
  <p style="font-size:1.2rem;opacity:0.9;max-width:700px;margin:0 auto 2rem;line-height:1.6;">
    We're not a comparison site â€” but until auto-switching is ready, use our tracker to find the best deals. Updated every weekday across all 14 UK regions.
  </p>
  <div style="display:flex;gap:2rem;justify-content:center;flex-wrap:wrap;margin:2rem 0;">
    <div style="text-align:center;">
      <div style="font-size:2rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">7</div>
      <div style="font-size:0.9rem;opacity:0.8;">Live Tariffs</div>
    </div>
    <div style="text-align:center;">
      <div style="font-size:2rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">14</div>
      <div style="font-size:0.9rem;opacity:0.8;">UK Regions</div>
    </div>
    <div style="text-align:center;">
      <div id="trackerSavings" style="font-size:2rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;">Â£165</div>
      <div style="font-size:0.9rem;opacity:0.8;">Avg. Savings/year</div>
    </div>
  </div>
  <button onclick="window.open('tariff-tracker.html','_blank')" style="padding:1.2rem 2.5rem;border:none;border-radius:15px;font-size:1.2rem;font-weight:700;background:linear-gradient(135deg,#6366f1,#ec4899);color:#fff;cursor:pointer;box-shadow:0 10px 30px rgba(236,72,153,0.4);transition:0.3s;">
    Compare Tariffs Now â†’
  </button>
  <p style="margin-top:1.5rem;font-size:0.9rem;opacity:0.7;">Updated every weekday â€¢ While we build full automation</p>
</div>
</section>

<!-- COMMUNITY CALLOUT -->
<section style="max-width:1200px;margin:3.5rem auto 4.5rem;padding:0 2rem;">
<div style="background:linear-gradient(135deg,rgba(236,72,153,0.15),rgba(99,102,241,0.15));padding:3rem;border-radius:22px;border:1px solid rgba(236,72,153,0.3);box-shadow:0 20px 60px rgba(236,72,153,0.2);text-align:center;">
  <div style="font-size:3rem;margin-bottom:1rem;">ğŸ’¬</div>
  <h2 style="font-size:2.5rem;font-weight:900;margin-bottom:1rem;">Community Discussions</h2>
  <p style="font-size:1.2rem;opacity:0.9;max-width:700px;margin:0 auto 2rem;line-height:1.6;">
    Help us shape the product, share experiences, ask questions, and learn what you're actually paying for. Together we can challenge the status quo.
  </p>
  <div style="display:flex;gap:2rem;justify-content:center;flex-wrap:wrap;margin:2rem 0;">
    <div style="text-align:center;">
      <div style="font-size:2.5rem;">ğŸ› ï¸</div>
      <div style="font-size:0.9rem;opacity:0.8;">Shape SwitchPilot</div>
    </div>
    <div style="text-align:center;">
      <div style="font-size:2.5rem;">ğŸ”„</div>
      <div style="font-size:0.9rem;opacity:0.8;">Switching Tips</div>
    </div>
    <div style="text-align:center;">
      <div style="font-size:2.5rem;">ğŸ’·</div>
      <div style="font-size:0.9rem;opacity:0.8;">Bill Help</div>
    </div>
    <div style="text-align:center;">
      <div style="font-size:2.5rem;">ğŸ’¡</div>
      <div style="font-size:0.9rem;opacity:0.8;">Money Saving</div>
    </div>
  </div>
  <button onclick="window.open('community.html','_blank')" style="padding:1.2rem 2.5rem;border:none;border-radius:15px;font-size:1.2rem;font-weight:700;background:linear-gradient(135deg,#ec4899,#6366f1);color:#fff;cursor:pointer;box-shadow:0 10px 30px rgba(236,72,153,0.4);transition:0.3s;">
    Join the Discussion â†’
  </button>
  <p style="margin-top:1.5rem;font-size:0.9rem;opacity:0.7;">Share your ideas â€¢ Help others save</p>
</div>
</section>

<section class="insights">
<h2>Recent Insights</h2>
<p style="opacity:.85;margin-top:.3rem;margin-bottom:2.5rem;font-size:1.2rem;position:relative;z-index:2;">Here's what our community is learning about right now</p>
<div class="topics">

<div class="topic" onclick="window.open('Q1-Cap.html','_blank')">
  <h3>ğŸ”† Q1-26 Price Cap Breakdown</h3>
  <p>Bills only rose Â£3 â€” but what's the deeper picture? Policy costs rising, wholesale costs fell, unit rates rose sharply. What does this mean for you?</p>
  <p>ğŸ“… 28 Nov 2025</p>
</div>

<div class="topic" onclick="window.open('nuclear-rab.html','_blank')">
  <h3>âš›ï¸ Nuclear RAB Charge</h3>
  <p>What's being added to bills from 2026 â€“ and why you're paying for a nuclear plant before it's built</p>
  <p>ğŸ“… 22 Nov 2025</p>
</div>

<div class="topic" onclick="window.open('article.html','_blank')">
  <h3>ğŸ”† Warm Home Discount Expansion</h3>
  <p>What's changing from winter 2025-26 and how it affects your bills â€“ plus why competition is heating up</p>
  <p>ğŸ“… 25 Oct 2025</p>
</div>

</div>
</section>

<section class="stats">
<div>
  <div class="stat-number">65%</div>
  <div>of UK could save more</div>
</div>
<div>
  <div class="stat-number" id="dynamicSavings">Â£200+</div>
  <div>potential yearly savings</div>
</div>
<div>
  <div class="stat-number">You</div>
  <div>shape what we build</div>
</div>
</section>

<!-- GAME SECTION -->

<section id="game" style="max-width:1200px;margin:6rem auto;padding:0 2rem;text-align:center;">
<div style="background:#11162e;padding:3rem;border-radius:30px;border:2px solid rgba(99,102,241,0.3);box-shadow:0 20px 60px rgba(0,0,0,0.4);position:relative;overflow:hidden;">

  <!-- Animated background -->

  <div style="position:absolute;inset:0;background-image:linear-gradient(rgba(99,102,241,0.08) 1px, transparent 1px),linear-gradient(90deg, rgba(236,72,153,0.08) 1px, transparent 1px);background-size:40px 40px;opacity:0.5;animation:gridSlide 20s linear infinite;pointer-events:none;"></div>

  <div style="position:relative;z-index:2;">
    <div style="font-size:3rem;margin-bottom:1rem;">âœˆï¸âš¡ğŸ’·</div>
    <h2 style="font-size:2.5rem;font-weight:900;margin-bottom:1rem;">Whilst We Build You a Service That Works for YOU</h2>
    <p style="font-size:1.1rem;opacity:0.85;margin-bottom:1.5rem;max-width:600px;margin-left:auto;margin-right:auto;">Why not play a fun game? Move your mouse to pilot the plane, catch energy savings, and avoid obstacles!</p>

<div id="gameStartScreen" style="margin-bottom:1.5rem;">
  <button onclick="startMainGame()" style="padding:1.3rem 3rem;background:linear-gradient(135deg,#6366f1,#ec4899);color:#fff;border:none;border-radius:20px;font-size:1.3rem;font-weight:700;cursor:pointer;box-shadow:0 10px 40px rgba(236,72,153,0.4);">ğŸ® Play Now</button>
</div>

<canvas id="gameCanvas" width="700" height="400" style="border:3px solid #6366f1;border-radius:15px;background:#0a0c1a;max-width:100%;cursor:none;display:none;margin:0 auto 1.5rem;"></canvas>

<div style="display:flex;justify-content:center;gap:2rem;flex-wrap:wrap;">
  <div style="padding:1rem 2rem;background:rgba(99,102,241,0.2);border-radius:15px;border:2px solid rgba(99,102,241,0.3);">
    <div style="font-size:0.9rem;opacity:0.7;margin-bottom:0.3rem;">Score</div>
    <div id="gameScore" style="font-size:1.8rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">0</div>
  </div>
  <div style="padding:1rem 2rem;background:rgba(99,102,241,0.2);border-radius:15px;border:2px solid rgba(99,102,241,0.3);">
    <div style="font-size:0.9rem;opacity:0.7;margin-bottom:0.3rem;">High Score</div>
    <div id="gameHighScore" style="font-size:1.8rem;font-weight:900;background:linear-gradient(135deg,#6366f1,#ec4899);-webkit-background-clip:text;-webkit-text-fill-color:transparent;">0</div>
  </div>
</div>

<div id="gameOverScreen" style="display:none;margin-top:2rem;">
  <h3 style="font-size:2rem;margin-bottom:1rem;color:#ec4899;">Game Over! ğŸ’¥</h3>
  <p style="font-size:1.3rem;margin-bottom:1rem;">Final Score: <span id="finalGameScore" style="color:#6366f1;font-weight:900;">0</span></p>
  <button onclick="restartMainGame()" style="padding:1rem 2.5rem;background:linear-gradient(135deg,#6366f1,#ec4899);color:#fff;border:none;border-radius:15px;font-size:1.2rem;font-weight:700;cursor:pointer;">Play Again</button>
</div>

  </div>
</div>
</section>

<section class="final-cta">
<h2>We're Building This Together</h2>
<p>65% of UK households are on Standard Variable Tariffs and could save <span id="dynamicSavingsText">Â£200+</span> per year by switching. Even those on fixed tariffs often miss better deals. We're creating an automated service that handles this for you â€” but we need your input to build what actually works.</p>
<button class="cta-btn" onclick="document.querySelector('.waitlist-form').scrollIntoView({behavior:'smooth'})">Join the Community</button>
</section>

<footer class="footer" style="text-align:center;padding:3rem 2rem;background:#0c0e1f;color:#fff;opacity:0.8;">
<p>ğŸ’Œ Weekly energy insights delivered to your inbox</p>
<p style="margin-top:1rem;">Â© 2025 SwitchPilot. Making energy bills make sense.</p>
</footer>

<script>
// Google Apps Script URL
const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzLUY6mfhHMOKj4m0kI1-4PmoCfwvurirWTPt9zNEOr-aa2EvDBGa-l1w9K4mVC5FrDoQ/exec';

// Target number for countdown
const TARGET_SIGNUPS = 5000;

// Initialize signup counter - fetch from Google Sheets
let signupCount = 0;

function updateCounterDisplay(count) {
    const countElement = document.getElementById('signupCount');
    const spotsElement = document.getElementById('spotsRemaining');
    const progressBar = document.getElementById('progressBar');
    
    if (countElement) countElement.textContent = count.toLocaleString();
    if (spotsElement) spotsElement.textContent = Math.max(0, TARGET_SIGNUPS - count).toLocaleString();
    if (progressBar) progressBar.style.width = Math.min(100, (count / TARGET_SIGNUPS) * 100) + '%';
}

// Fetch ONLY verified count ("yes") from Apps Script
fetch(SCRIPT_URL + '?getCount=1')
    .then(response => response.json())
    .then(data => {
        signupCount = data.count || 0;
        updateCounterDisplay(signupCount);
    })
    .catch(err => {
        console.log('Could not fetch signup count:', err);
        updateCounterDisplay(0);
    });


function animateCounter(element, newValue) {
    element.style.transform = 'scale(1.3)';
    element.style.transition = 'transform 0.3s ease';
    element.textContent = newValue.toLocaleString();
    setTimeout(() => {
        element.style.transform = 'scale(1)';
    }, 300);
}

function handleSubmit(e) {
    e.preventDefault();
    const email = e.target.querySelector('input').value;
    const form = e.target.closest('.waitlist-form');
    
    // Optimistically increment counter (immediate feedback)
    signupCount++;
    const counterElement = document.getElementById('signupCount');
    if (counterElement) {
        animateCounter(counterElement, signupCount);
    }
    updateCounterDisplay(signupCount);
    
    // Show loading
    form.innerHTML = '<div style="text-align:center;padding:2rem;"><p style="color:#666;font-size:1.1rem;">Adding you to the flight crew...</p></div>';
    
    // Send to Google Sheets
    fetch(SCRIPT_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email: email })
    })
    .then(() => {
        form.innerHTML = `
            <div style="text-align:center;padding:2rem;">
                <div style="font-size:4rem;margin-bottom:1rem;">ğŸ‰</div>
                <h3 style="color:#6366f1;margin-bottom:0.5rem;font-size:1.8rem;">Welcome Aboard!</h3>
                <p style="color:#666;">Your first weekly insight is taking off to <strong>${email}</strong></p>
            </div>
        `;
    })
    .catch(() => {
        form.innerHTML = `
            <div style="text-align:center;padding:2rem;">
                <div style="font-size:4rem;margin-bottom:1rem;">ğŸ‰</div>
                <h3 style="color:#6366f1;margin-bottom:0.5rem;font-size:1.8rem;">Welcome Aboard!</h3>
                <p style="color:#666;">Your first weekly insight is taking off to <strong>${email}</strong></p>
            </div>
        `;
    });
}

// GAME CODE
const gameCanvas = document.getElementById('gameCanvas');
if (gameCanvas) {
    const ctx = gameCanvas.getContext('2d');
    
    let gameRunning = false;
    let gameScore = 0;
    let gameHighScore = 0;
    document.getElementById('gameHighScore').textContent = gameHighScore;
    
    const player = {
        x: gameCanvas.width / 2,
        y: gameCanvas.height - 80,
        size: 35,
        emoji: 'âœˆï¸'
    };
    
    const goodItems = ['âš¡', 'ğŸ’·', 'ğŸ”‹', 'ğŸ’¡'];
    const badItems = ['ğŸ’¥', 'ğŸŒ©ï¸'];
    const items = [];
    
    let mouseX = player.x;
    let mouseY = player.y;
    
    gameCanvas.addEventListener('mousemove', (e) => {
        const rect = gameCanvas.getBoundingClientRect();
        mouseX = (e.clientX - rect.left) * (gameCanvas.width / rect.width);
        mouseY = (e.clientY - rect.top) * (gameCanvas.height / rect.height);
    });
    
    // Improved touch controls with finger offset
    gameCanvas.addEventListener('touchstart', (e) => {
        e.preventDefault();
        const rect = gameCanvas.getBoundingClientRect();
        const touch = e.touches[0];
        mouseX = (touch.clientX - rect.left) * (gameCanvas.width / rect.width);
        mouseY = (touch.clientY - rect.top) * (gameCanvas.height / rect.height) - 60;
    });
    
    gameCanvas.addEventListener('touchmove', (e) => {
        e.preventDefault();
        const rect = gameCanvas.getBoundingClientRect();
        const touch = e.touches[0];
        mouseX = (touch.clientX - rect.left) * (gameCanvas.width / rect.width);
        mouseY = (touch.clientY - rect.top) * (gameCanvas.height / rect.height) - 60;
    });
    
    gameCanvas.addEventListener('touchend', (e) => {
        e.preventDefault();
    });
    
    function createItem() {
        const isGood = Math.random() > 0.25;
        const emoji = isGood 
            ? goodItems[Math.floor(Math.random() * goodItems.length)]
            : badItems[Math.floor(Math.random() * badItems.length)];
        
        items.push({
            x: Math.random() * (gameCanvas.width - 40),
            y: -40,
            size: 30,
            emoji: emoji,
            speed: 2 + Math.random() * 2,
            isGood: isGood
        });
    }
    
    function drawEmoji(emoji, x, y, size) {
        ctx.font = `${size}px Arial`;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(emoji, x, y);
    }
    
    function checkCollision(item) {
        const dist = Math.sqrt(
            Math.pow(player.x - item.x, 2) + 
            Math.pow(player.y - item.y, 2)
        );
        return dist < (player.size + item.size) / 2;
    }
    
    function updateGame() {
        if (!gameRunning) return;
        
        ctx.fillStyle = '#0a0c1a';
        ctx.fillRect(0, 0, gameCanvas.width, gameCanvas.height);
        
        player.x += (mouseX - player.x) * 0.15;
        player.y += (mouseY - player.y) * 0.15;
        
        player.x = Math.max(20, Math.min(gameCanvas.width - 20, player.x));
        player.y = Math.max(20, Math.min(gameCanvas.height - 20, player.y));
        
        drawEmoji(player.emoji, player.x, player.y, player.size);
        
        for (let i = items.length - 1; i >= 0; i--) {
            const item = items[i];
            item.y += item.speed;
            
            drawEmoji(item.emoji, item.x, item.y, item.size);
            
            if (checkCollision(item)) {
                if (item.isGood) {
                    gameScore += 10;
                    document.getElementById('gameScore').textContent = gameScore;
                    
                    ctx.fillStyle = 'rgba(99, 102, 241, 0.3)';
                    ctx.beginPath();
                    ctx.arc(item.x, item.y, 50, 0, Math.PI * 2);
                    ctx.fill();
                } else {
                    endGame();
                }
                items.splice(i, 1);
            }
            else if (item.y > gameCanvas.height + 40) {
                items.splice(i, 1);
            }
        }
        
        if (Math.random() < 0.02) {
            createItem();
        }
        
        requestAnimationFrame(updateGame);
    }
    
    function endGame() {
        gameRunning = false;
        
        if (gameScore > gameHighScore) {
            gameHighScore = gameScore;
            document.getElementById('gameHighScore').textContent = gameHighScore;
        }
        
        document.getElementById('finalGameScore').textContent = gameScore;
        document.getElementById('gameOverScreen').style.display = 'block';
        document.getElementById('gameCanvas').style.display = 'none';
    }
    
    window.startMainGame = function() {
        gameRunning = true;
        gameScore = 0;
        items.length = 0;
        player.x = gameCanvas.width / 2;
        player.y = gameCanvas.height - 80;
        document.getElementById('gameScore').textContent = 0;
        document.getElementById('gameStartScreen').style.display = 'none';
        document.getElementById('gameCanvas').style.display = 'block';
        updateGame();
        
        for (let i = 0; i < 3; i++) {
            setTimeout(createItem, i * 500);
        }
    };
    
    window.restartMainGame = function() {
        document.getElementById('gameOverScreen').style.display = 'none';
        startMainGame();
    };
}

// PRICE CAP TOOL CODE
const priceCapData = {
  directDebit: {
    period1: { name: "Oct-Dec 2025", wholesale: 720, networks: 396, operating: 270, policy: 215, ebit: 42, headroom: 18, levelisation: 10, vat: 84, total: 1755 },
    period2: { name: "Jan-Mar 2026", wholesale: 690, networks: 397, operating: 279, policy: 236, ebit: 44, headroom: 18, levelisation: 10, vat: 84, total: 1758 }
  },
  standardCredit: {
    period1: { name: "Oct-Dec 2025", wholesale: 720, networks: 396, operating: 406, policy: 215, ebit: 44, headroom: 20, levelisation: 0, vat: 90, total: 1890 },
    period2: { name: "Jan-Mar 2026", wholesale: 690, networks: 397, operating: 415, policy: 236, ebit: 45, headroom: 20, levelisation: 0, vat: 90, total: 1894 }
  },
  prepayment: {
    period1: { name: "Oct-Dec 2025", wholesale: 719, networks: 391, operating: 296, policy: 215, ebit: 42, headroom: 19, levelisation: -56, vat: 81, total: 1707 },
    period2: { name: "Jan-Mar 2026", wholesale: 690, networks: 392, operating: 304, policy: 236, ebit: 44, headroom: 19, levelisation: -56, vat: 81, total: 1711 }
  }
};

const priceCapColors = {
  wholesale: '#5DADE2',
  networks: '#884EA0',
  operating: '#E67E22',
  policy: '#34495E',
  ebit: '#A569BD',
  headroom: '#7F8C8D',
  levelisation: '#52796F',
  vat: '#922B3E'
};

const priceCapLabels = {
  wholesale: 'Wholesale incl. CFD',
  networks: 'Networks',
  operating: 'Operating costs',
  policy: 'Policy',
  ebit: 'EBIT allowance',
  headroom: 'Headroom',
  levelisation: 'Levelisation',
  vat: 'VAT'
};

const priceCapDescriptions = {
  wholesale: 'The cost of buying energy on wholesale markets, plus Contracts for Difference (CfD) payments to renewable generators',
  networks: 'Charges for maintaining and operating the electricity and gas distribution networks that deliver energy to your home',
  operating: 'Supplier costs including customer service, billing, meter reading, and debt management',
  policy: 'Government policy costs: Renewables Obligation, Feed-in Tariffs, ECO scheme, Warm Home Discount, and Nuclear RAB charges',
  ebit: 'Earnings Before Interest and Tax - the profit margin Ofgem allows suppliers to earn',
  headroom: 'Additional allowance to protect suppliers from unexpected cost increases and reduce the risk of supplier failures',
  levelisation: 'Adjustment that balances costs across different payment methods (can be negative for prepayment meters)',
  vat: 'Value Added Tax charged at 5% on domestic energy bills'
};

let currentPriceCapMethod = 'directDebit';
let priceCapChart = null;

function renderPriceCapChart() {
  const data = priceCapData[currentPriceCapMethod];
  const ctx = document.getElementById('priceCapChart');
  
  if (!ctx) return;
  
  if (priceCapChart) {
    priceCapChart.destroy();
  }
  
  const components = ['wholesale', 'networks', 'operating', 'policy', 'ebit', 'headroom', 'levelisation', 'vat'];
  
  priceCapChart = new Chart(ctx, {
    type: 'bar',
    data: {
      labels: [data.period1.name, data.period2.name],
      datasets: components.map(comp => ({
        label: priceCapLabels[comp],
        data: [data.period1[comp], data.period2[comp]],
        backgroundColor: priceCapColors[comp],
        borderColor: priceCapColors[comp],
        borderWidth: 1
      }))
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        x: { stacked: true, ticks: { color: '#ecf0f1' }, grid: { color: '#34495e' } },
        y: { stacked: true, ticks: { color: '#ecf0f1' }, grid: { color: '#34495e' }, title: { display: true, text: 'Cost (Â£)', color: '#ecf0f1' } }
      },
      plugins: {
        legend: { 
          labels: { color: '#ecf0f1', padding: 15, font: { size: 12 } }
        },
        tooltip: {
          enabled: true,
          mode: 'nearest',
          intersect: true,
          backgroundColor: 'rgba(255, 255, 255, 0.98)',
          titleColor: '#2c3e50',
          bodyColor: '#34495e',
          borderColor: '#6366f1',
          borderWidth: 2,
          padding: 15,
          cornerRadius: 10,
          titleFont: { size: 14, weight: 'bold' },
          bodyFont: { size: 12 },
          boxPadding: 6,
          usePointStyle: true,
          displayColors: true,
          callbacks: {
            title: function(items) {
              return items[0].dataset.label;
            },
            label: function(context) {
              return 'Â£' + context.parsed.y + ' per year';
            },
            afterLabel: function(context) {
              const componentKey = components[context.datasetIndex];
              const description = priceCapDescriptions[componentKey];
              // Wrap text for mobile readability
              const maxLength = window.innerWidth < 480 ? 50 : 80;
              if (description.length > maxLength) {
                const words = description.split(' ');
                let lines = [];
                let currentLine = '';
                
                words.forEach(word => {
                  if ((currentLine + word).length > maxLength) {
                    lines.push(currentLine.trim());
                    currentLine = word + ' ';
                  } else {
                    currentLine += word + ' ';
                  }
                });
                lines.push(currentLine.trim());
                return '\n' + lines.join('\n');
              }
              return '\n' + description;
            },
            footer: function(items) {
              const total = items.reduce((sum, item) => sum + item.parsed.y, 0);
              return '\nPeriod Total: Â£' + Math.round(total);
            }
          },
          bodySpacing: 6,
          footerMarginTop: 10,
          footerFont: { size: 13, weight: 'bold' },
          footerColor: '#6366f1'
        }
      },
      interaction: {
        mode: 'nearest',
        intersect: true
      }
    }
  });
  
  updatePriceCapStats();
}

function updatePriceCapStats() {
  const data = priceCapData[currentPriceCapMethod];
  const p1 = document.getElementById('priceCapPeriod1Total');
  const p2 = document.getElementById('priceCapPeriod2Total');
  const change = document.getElementById('priceCapChangeAmount');
  
  if (p1) p1.textContent = 'Â£' + data.period1.total;
  if (p2) p2.textContent = 'Â£' + data.period2.total;
  
  if (change) {
    const changeVal = data.period2.total - data.period1.total;
    const percentChange = ((changeVal / data.period1.total) * 100).toFixed(1);
    change.textContent = (changeVal >= 0 ? '+' : '') + 'Â£' + changeVal + ' (' + (changeVal >= 0 ? '+' : '') + percentChange + '%)';
  }
}

function setPriceCapMethod(method) {
  currentPriceCapMethod = method;
  document.querySelectorAll('.price-cap-btn').forEach(btn => {
    btn.className = 'price-cap-btn';
  });
  event.target.className = 'price-cap-btn price-cap-active';
  renderPriceCapChart();
}

// Initialize price cap chart when page loads
window.addEventListener('load', function() {
  if (typeof Chart !== 'undefined' && document.getElementById('priceCapChart')) {
    renderPriceCapChart();
  }
  
  // Load dynamic savings from tariff tracker
  loadDynamicSavings();
});

// Fetch tariff data and calculate best savings
async function loadDynamicSavings() {
  try {
    const response = await fetch('./all_tariffs.json');
    if (!response.ok) return;
    const data = await response.json();
    
    
    // Validation function to filter out incomplete data
    function isValidTariff(tariff) {
      if (!tariff.tariff_name || tariff.tariff_name.trim() === '') return false;
      if (tariff.error) return false;
      if (!tariff.elec_unit_rate_p || !tariff.elec_standing_p) return false;
      if (tariff.elec_unit_rate_p <= 0 || tariff.elec_standing_p <= 0) return false;
      if (!tariff.gas_unit_rate_p || !tariff.gas_standing_p) return false;
      if (tariff.gas_unit_rate_p <= 0 || tariff.gas_standing_p <= 0) return false;
      return true;
    }

    // Ofgem cap rates by region (Jan-Mar 2026, Direct Debit, inc VAT)
    const capRatesByRegion = {
      'North West': { elecStanding: 52.22, elecUnit: 28.45, gasStanding: 35.23, gasUnit: 5.89 },
      'North East': { elecStanding: 60.93, elecUnit: 26.75, gasStanding: 35.21, gasUnit: 5.93 },
      'Yorkshire': { elecStanding: 59.72, elecUnit: 26.69, gasStanding: 35.18, gasUnit: 5.90 },
      'North Scotland': { elecStanding: 62.07, elecUnit: 28.36, gasStanding: 35.28, gasUnit: 5.89 },
      'Southern': { elecStanding: 45.70, elecUnit: 27.83, gasStanding: 34.56, gasUnit: 6.00 },
      'South Scotland': { elecStanding: 57.62, elecUnit: 27.18, gasStanding: 35.30, gasUnit: 5.89 },
      'North Wales & Merseyside': { elecStanding: 71.01, elecUnit: 29.09, gasStanding: 35.49, gasUnit: 5.94 },
      'London': { elecStanding: 47.11, elecUnit: 27.00, gasStanding: 35.63, gasUnit: 6.03 },
      'South East': { elecStanding: 48.66, elecUnit: 28.27, gasStanding: 34.68, gasUnit: 5.83 },
      'Eastern': { elecStanding: 49.33, elecUnit: 27.88, gasStanding: 34.74, gasUnit: 5.87 },
      'East Midlands': { elecStanding: 50.17, elecUnit: 26.89, gasStanding: 34.82, gasUnit: 5.79 },
      'West Midlands': { elecStanding: 54.08, elecUnit: 26.99, gasStanding: 35.12, gasUnit: 5.85 },
      'South West': { elecStanding: 55.11, elecUnit: 28.16, gasStanding: 34.71, gasUnit: 6.15 },
      'South Wales': { elecStanding: 52.75, elecUnit: 28.18, gasStanding: 35.35, gasUnit: 6.11 }
    };
    
    const typicalElec = 2700;
    const typicalGas = 11500;
    
    // Calculate cap cost for each region and find the most expensive
    let maxCapCost = 0;
    let expensiveRegion = 'London';
    
    for (const [region, rates] of Object.entries(capRatesByRegion)) {
      const capCost = (rates.elecStanding * 365 / 100) + (rates.elecUnit * typicalElec / 100) +
                      (rates.gasStanding * 365 / 100) + (rates.gasUnit * typicalGas / 100);
      if (capCost > maxCapCost) {
        maxCapCost = capCost;
        expensiveRegion = region;
      }
    }
    
    // Find cheapest dual fuel fixed tariff in that expensive region
    const regionTariffs = data.tariffs
      .filter(t => t.region === expensiveRegion)
      .filter(t => isValidTariff(t))
      .filter(t => {
        const name = (t.tariff_name || '').toLowerCase();
        return !name.includes('variable') && !name.includes('svt') && !name.includes('standard');
      });
    
    let cheapestCost = Infinity;
    regionTariffs.forEach(t => {
      const cost = (t.elec_standing_p * 365 / 100) + (t.elec_unit_rate_p * typicalElec / 100) +
                   (t.gas_standing_p * 365 / 100) + (t.gas_unit_rate_p * typicalGas / 100);
      if (cost < cheapestCost) cheapestCost = cost;
    });
    
    // Calculate savings
    const bestSavings = maxCapCost - cheapestCost;
    
    // Update the display if we found savings
    if (bestSavings > 50) {
      const savingsEl = document.getElementById('dynamicSavings');
      if (savingsEl) {
        savingsEl.textContent = 'Â£' + Math.round(bestSavings) + '+';
      }
      const savingsTextEl = document.getElementById('dynamicSavingsText');
      if (savingsTextEl) {
        savingsTextEl.textContent = 'Â£' + Math.round(bestSavings) + '+';
      }
      const trackerEl = document.getElementById('trackerSavings');
      if (trackerEl) {
        trackerEl.textContent = 'Â£' + Math.round(bestSavings);
      }
    }
  } catch (e) {
    console.log('Could not load dynamic savings:', e);
  }
}

</script>

</body>
</html>

